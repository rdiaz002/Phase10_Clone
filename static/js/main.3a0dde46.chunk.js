(this.webpackJsonpphase10_clone=this.webpackJsonpphase10_clone||[]).push([[0],{45:function(e,t,n){e.exports=n(88)},50:function(e,t,n){},51:function(e,t,n){},85:function(e,t){},88:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),l=n.n(c),u=(n(50),n(51),n(52),n(3)),i=n(5),o=n(9),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_CHAT":return[].concat(Object(i.a)(e),[t.msg]);default:return e}},m=Object(o.combineReducers)({playerName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_NAME":return t.name;default:return e}},playerID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_ID":return t.id;default:return e}},hostID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_HOSTID":return t.hostID;default:return e}},playerList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_PLAYERLIST":return t.playerList;default:return e}},chatLog:s,gameState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"WAITING",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_GAMESTATE":return t.gameState;default:return e}},playerState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"PICKUP",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_PLAYERSTATE":return""!=t.playerState?t.playerState:"DISCARD"==e?"PICKUP":"DISCARD";default:return e}},playerHand:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_PLAYERHAND":return t.hand;default:return e}},currentPlayer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_TURN":return t.currentPlayer?t.currentPlayer:e;default:return e}},discardPile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_PILE":return t.discardPile?t.discardPile:e;default:return e}},phases:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_PHASES":return t.phases?t.phases:e;default:return e}}}),d=n(43),f=Object(o.createStore)(m,Object(d.composeWithDevTools)()),p=function(){var e=f.getState();return e.playerList.find((function(t){return t.id==e.playerID})).phase},E=function(){var e=f.getState();return e.currentPlayer==e.playerID},h=function(){var e=f.getState();return Object(i.a)(e.playerHand)},v=[function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;if(t.length<n)return!1;var a=!0;return t.forEach((function(t){"Wild"!=t.type?"Skip"!=t.type?null==e?(e=t,a=a&&!0):a=e.number==t.number?a&&!0:a&&!1:a=a&&!1:a=a&&!0})),a},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(e.length<t)return!1;var n,a=Object(i.a)(e),r=!0,c=0,l=0;return y(a),a.forEach((function(t,a){if(null==n){if("Wild"==t.type)return r=r&&!0,c++,void(l=a+1);if("Skip"==t.type)return void(r=r&&!1);if((n=parseInt(t.number))-c<=0)return void(r=r&&!1);for(var u=l-c;u<l;u++)e[u].number=n-c+u;r=r&&!0}else if("Wild"==t.type)n++,t.number=n,r=r&&!0;else{if("Skip"==t.type)return void(r=r&&!1);var i=parseInt(t.number);i==n+1?(r=r&&!0,n=i):r=r&&!1}})),r&&(e=a),r},function(e,t){var n,a=!0;return e.forEach((function(e){if(n)switch(e.type){case"Wild":a=a&&!0;break;case"Skip":a=a&&!1;break;default:a=a&&e.type==n}else switch(e.type){case"Wild":a=a&&!0;break;case"Skip":a=a&&!1;break;default:n=e.type,a=a&&!0}})),a}],y=function(e){for(var t=[],n=[],a=[],r=0;r<e.length;r++)0==e[r].number&&t.push(r);n=e.filter((function(e){return 0==e.number})),(a=e.filter((function(e){return e.number>0}))).sort((function(e,t){return e.number>t.number}));r=0;for(var c=0;t.length>0;)c<a.length&&t[0]>c?c++:c<a.length&&t[0]<=c?(a.splice(c,0,n.pop()),c++,t.splice(0,1)):(a.push(n.pop()),t.splice(0,1))},b=n(44),S="";S="https://ronnys-phase10.herokuapp.com";var g=n.n(b)()(S,{reconnection:!1}),D=function(){g.emit("CREATE_HAND")},P=function(){return r.a.createElement(r.a.Fragment,null,function(){var e=f.getState();return e.hostID==e.playerID}()?r.a.createElement("button",{onClick:function(e){e.preventDefault(),function(){var e=f.getState();return!(e.playerList.length<2)&&!e.playerList.some((function(e){return"NOT_READY"==e.STATE}))}()&&g.emit("START_GAME")}},"Start Game"):r.a.createElement("button",{onClick:function(e){e.preventDefault(),g.emit("READY"),e.target.disabled=!0}},"Ready"))},k=n(6),A=function(e){var t={backgroundColor:function(){switch(e.card.type){case"Red":return"#ff0000";case"Green":return"#00ff00";case"Blue":return"#3672F2";case"Yellow":return"#ffff00";case"Wild":case"Skip":return"#ffffff"}}()};return r.a.createElement("div",{className:"Card",style:t,key:e.index,id:e.index,onClick:e.click},r.a.createElement("h2",null,e.card.type),r.a.createElement("h1",null,e.card.number))},T=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("h2",{style:{color:"white",textDecoration:"underline"}},"Completed Stacks"),e.holdDeck.map((function(e){return r.a.createElement("div",{className:"Container"},e.deck.map((function(e,t){return r.a.createElement(A,{card:e,index:t})})))}))))},I=n(10),C=function(e){var t=Object(a.useState)([]),n=Object(k.a)(t,2),c=n[0],l=n[1],u=Object(a.useState)([]),o=Object(k.a)(u,2),s=o[0],m=(o[1],Object(a.useState)([])),d=Object(k.a)(m,2),f=d[0],p=d[1];Object(a.useEffect)((function(){e.currentPhases.patterns.forEach((function(e){s.push({desc:e.desc,funcID:e.funcID,deck:[]})})),p(h())}),[]);var E=function(e){e.preventDefault(),l([].concat(Object(i.a)(c),[f[e.currentTarget.id]])),f.splice(e.currentTarget.id,1)},y=function(e){e.preventDefault(),f.push(c[e.currentTarget.id]),c.splice(e.currentTarget.id,1),l(Object(i.a)(c))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"SubmissionView"},r.a.createElement("div",{className:"View"},r.a.createElement("button",{key:0,onClick:e.onSubmit},"X")),r.a.createElement("div",{className:"SelectView"},r.a.createElement("div",{className:"SelectContainer"},c.map((function(e,t){return r.a.createElement(A,{card:e,key:t,index:t,click:y})}))),r.a.createElement("div",{className:"ButtonDiv"},e.currentPhases.patterns.map((function(e,t){return r.a.createElement("button",{key:t,id:t,onClick:function(n){!function(e,t,n,a){a.preventDefault(),v[t](c,n)?(s[e].deck.length>0?(s[e].deck.forEach((function(e){f.push(e)})),s[e].deck=c):s[e].deck=Object(i.a)(c),l([])):(c.forEach((function(e){f.push(e)})),l([]))}(t,e.funcID,e.size,n)}},e.desc," ",e.size)})))),r.a.createElement("div",{className:"SubContainer"},f.map((function(e,t){return r.a.createElement(A,{card:e,key:t,index:t,click:E})}))),r.a.createElement(T,{holdDeck:s}),r.a.createElement("button",{onClick:function(t){s.reduce((function(e,t){return t.deck.length>0?e&&!0:e&&!1}),!0)?(!function(e){g.emit("PHASE_COMPLETE",e)}(s),Object(I.b)("Phase Completed",{type:"success",autoClose:1e3}),e.onSubmit(t)):Object(I.b)("Must complete all stacks before submission.",{type:"error",autoClose:1e3})}},"Submit Phase")))},N=function(e){var t=e.playerHand,n=e.playerState,c=e.phases,l=Object(a.useState)(!1),u=Object(k.a)(l,2),i=u[0],o=u[1],s=p();Object(a.useEffect)((function(){D()}),[]);var m=function(e){e.preventDefault(),o(!i)},d=function(e){var a;e.preventDefault(),E()&&"DISCARD"==n&&(a=t[e.currentTarget.id],g.emit("DISCARD",a))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"CardView"},r.a.createElement("div",{className:E()?"Container Turn":"Container NoGo"},t.map((function(e,t){return r.a.createElement(A,{card:e,key:t,index:t,click:d})})))),i?r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{onSubmit:m,currentPhases:c[s]})):null,r.a.createElement("button",{onClick:m,hidden:!E()},"Submit Phases"))},O=Object(u.b)((function(e){return{playerHand:e.playerHand,playerState:e.playerState,currentPlayer:e.currentPlayer,phases:e.phases}}))(N),j=function(e){return r.a.createElement("div",{className:"Deck",onClick:function(){E()&&"PICKUP"==e.playerState&&g.emit("PICKUP_DECK")}},r.a.createElement("h2",null,"DECK"))},_=function(){var e=f.getState().phases,t=p();return r.a.createElement("div",{className:"PhaseCard"},r.a.createElement("h4",null,"List of Phases"),e.map((function(e,n){return r.a.createElement("h4",null,t==n?">":"",n+1,"."," ",e.patterns.map((function(t,n){return r.a.createElement("span",null,t.desc," ",t.size,n+1<e.patterns.length?",":"")})))})))},U=function(e){var t=e.discardPile,n=e.playerState,a=function(e){E()&&"PICKUP"==n&&g.emit("PICKUP_DISCARD")};return r.a.createElement("div",{className:"Discard"},r.a.createElement(_,null),r.a.createElement("div",{className:"FlexColumn"},r.a.createElement("h3",null,"Discard Pile"),r.a.createElement("div",{className:"DiscardContainer"},t.map((function(e,t){return r.a.createElement(A,{card:e,key:t,index:t,click:a})})))),r.a.createElement(j,{playerState:n}))},L=Object(u.b)((function(e){return{discardPile:e.discardPile,playerState:e.playerState}}))(U),w=function(e){var t=Object(a.useState)([]),n=Object(k.a)(t,2),c=n[0],l=n[1],u=!1;Object(a.useEffect)((function(){l(h())}),[]);var o=function(t,n){var a=e.bundle.stack.funcID,r=c[n],o=u?[c[n]].concat(Object(i.a)(e.bundle.stack.deck)):[].concat(Object(i.a)(e.bundle.stack.deck),[c[n]]);v[a](o,o.length)?(!function(e,t,n,a){g.emit("UPDATE_STACK",{playerID:e,stackIndx:t,newStack:n,newCard:a})}(e.bundle.ownerID,e.bundle.stackIndx,o,r),c.splice(n,1),e.bundle.stack.deck.push(r),l(c)):console.log("BAD CARD")};return r.a.createElement("div",{className:"overlay"},r.a.createElement("button",{onClick:e.onSubmit},"Close"),r.a.createElement("div",{className:"Flex"},r.a.createElement("button",{onClick:function(e){u=!0}},"Front"),r.a.createElement("div",{className:"SubContainer"},e.bundle.stack.deck.map((function(e,t){return r.a.createElement(A,{card:e,index:t})}))),r.a.createElement("button",{onClick:function(e){u=!1}},"Back")),r.a.createElement("div",{className:"SubContainer"},c.map((function(e,t){return r.a.createElement(A,{card:e,index:t,click:function(e){o(0,t)}})}))))},R=function(e){var t=e.playerList,n=Object(a.useState)(!1),c=Object(k.a)(n,2),l=c[0],u=c[1],i=Object(a.useState)({}),o=Object(k.a)(i,2),s=o[0],m=o[1],d=function(e,n,a){if(E()&&function(){var e=f.getState();return"COMPLETE"==e.playerList.find((function(t){return t.id==e.playerID})).phaseState}()){var r=n,c=t.find((function(e){return e.id==n})).phaseStacks[a];u(!l),m({ownerID:r,stack:c,stackIndx:a})}};return r.a.createElement("div",{className:"StacksView"},t.map((function(e,t){return r.a.createElement("div",{key:t,className:"StackUnit"},r.a.createElement("div",null,r.a.createElement("h2",null,e.name),r.a.createElement("h4",null,"phase: ",e.phase)),r.a.createElement("div",{className:"Stack"},e.phaseStacks.map((function(t,n){return r.a.createElement("div",{className:"StackContainer",onClick:function(t){d(0,e.id,n)}},t.deck.map((function(e,t){return r.a.createElement(A,{card:e,index:t})})))}))))})),l?r.a.createElement(w,{bundle:s,onSubmit:function(){u(!l)}}):null)},x=Object(u.b)((function(e){return{playerList:e.playerList}}))(R),H=function(e){var t=e.playerList,n=e.hostID;return r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Players"))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,""===e.name?e.id:e.name,function(e){return n==e.id}(e)?r.a.createElement("strong",null," Host"):r.a.createElement("strong",null," ",e.STATE)))})))))},F=Object(u.b)((function(e){return{playerList:e.playerList,hostID:e.hostID,playerID:e.playerID}}))(H),M=function(e){e.dispatch,e.playerID,e.playerName,e.Host;return r.a.createElement(r.a.Fragment,null,r.a.createElement(F,null))},G=Object(u.b)((function(e){return{playerName:e.playerName,playerID:e.playerID}}))(M),W=function(e){return{type:"UPDATE_PLAYERSTATE",playerState:e}},Y=function(e){var t=e.dispatch,n=e.chatLog,c="";Object(a.useEffect)((function(){var e;e=function(e){!function(e){t(function(e){return{type:"UPDATE_CHAT",msg:e}}(e)),document.getElementById("dummy").scrollIntoView({behavior:"smooth"})}(e)},g.on("NEW_MSG",(function(t){e(t)}))}),[]);return r.a.createElement("div",{className:"Chat"},r.a.createElement("div",{className:"ChatWindow",id:"chatwindowdiv"},n.map((function(e){return r.a.createElement("h2",null,e)})),r.a.createElement("div",{id:"dummy"})),r.a.createElement("form",{onSubmit:function(e){var t;e.preventDefault(),t=f.getState().playerName+": "+c,g.emit("ROOM_MSG",t),document.getElementById("chatbar").value=""}},r.a.createElement("label",null,"Message:",r.a.createElement("input",{id:"chatbar",type:"text",placeholder:"Type here",onChange:function(e){c=e.target.value}})),r.a.createElement("input",{type:"submit",value:"Submit"})))},K=Object(u.b)((function(e){return{chatLog:e.chatLog}}))(Y),B=function(e){var t="";return r.a.createElement("div",{className:"overlay"},r.a.createElement("form",{className:"nameChangeForm"},r.a.createElement("input",{type:"text",onChange:function(e){t=e.target.value},placeholder:"Enter Your Name"}),r.a.createElement("button",{onClick:function(n){n.preventDefault(),""!==t&&(e.dispatch(function(e){return{type:"UPDATE_NAME",name:e}}(t)),function(e){g.emit("UPDATE_NAME",e)}(t))}},"Submit")))},V=function(e){var t=e.dispatch,n=e.state,c=function(e){t({type:"UPDATE_HOSTID",hostID:e.hostID}),t({type:"UPDATE_PLAYERLIST",playerList:e.playerList}),t(function(e){return{type:"UPDATE_GAMESTATE",gameState:e}}(e.gameState)),t(function(e){return{type:"UPDATE_TURN",currentPlayer:e}}(e.currentPlayer)),t({type:"UPDATE_PILE",discardPile:e.discardPile}),t({type:"UPDATE_PHASES",phases:e.phases})},l=function(e){t(function(e){return{type:"UPDATE_PLAYERHAND",hand:e}}(e))},u=function(e){t(function(e){return{type:"UPDATE_ID",id:e}}(e))},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t(W(e))},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";Object(I.b)(e,{autoClose:2e3,type:t})};return Object(a.useEffect)((function(){!function(e,t,n){g.on("ROOM_INFO",(function(t){e(t)})),g.on("PLAYER_ID",(function(e){t(e)})),g.on("NEXT_STATE",(function(){n()})),g.on("NEW_ROUND",(function(){D(),n("PICKUP")})),g.on("connect_error",(function(){alert("There was an error reaching the server. Refresh the page to try again.")})),g.on("disconnect",(function(){alert("You were disconnected. Refresh the page")}))}(c,u,i),function(e){g.on("HAND_REQUEST",(function(t){e(t)}))}(l),function(e){g.on("NOTI",(function(t){e(t)}))}(o)}),[]),r.a.createElement("div",{className:"Game"},"FULL"==n.gameState?r.a.createElement("h1",null,"GAME IN PROGRESS"):"Running"==n.gameState?r.a.createElement(r.a.Fragment,null,r.a.createElement(x,null),r.a.createElement(L,null),r.a.createElement(O,null),r.a.createElement(K,null)):r.a.createElement(r.a.Fragment,null,""==n.playerName&&"WAITING"==n.gameState?r.a.createElement(B,{className:"overlay",dispatch:t}):null,r.a.createElement(G,null),r.a.createElement(P,null),r.a.createElement(K,null)))},z=Object(u.b)((function(e){return{state:e}}))(V),J=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(z,null))};l.a.render(r.a.createElement(u.a,{store:f},r.a.createElement(I.a,{pauseOnFocusLoss:!1}),r.a.createElement(J,null)),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.3a0dde46.chunk.js.map